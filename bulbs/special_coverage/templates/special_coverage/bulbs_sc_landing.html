{% load betty humanize ads static content %}

<div class="sc-landing-billboard">
  <figure class="sc-landing-billboard-img">
    {% cropped special_coverage.image %}
  </figure>
</div>

{% if current_video %}
  <bulbs-video-carousel class="video-carousel sc-carousel">
    <div class='video-carousel-player sc-video-player'>
      <bulbs-video
        src='{{ VIDEOHUB_BASE_URL }}/video/{{current_video}}.json'
        data-play-track-action="Video: Main: Play"
        data-play-track-category="Special Coverage Landing"
        data-play-track-label="#"
        target-host-channel="specialcoverage_main"
        target-special-coverage="{{ special_coverage.slug }}"
        target-campaign-id="{{ special_coverage.tunic_campaign_id }}"
        autoplay
        no-endcard
      >
      </bulbs-video>
      <div class="video-carousel-meta sc-carousel-meta">
        {% if special_coverage.tunic_campaign_id %}
          <campaign-display
            class="campaign-display-preamble"
            data-track-action="Video: Main: Sponsor"
            data-track-category="Special Coverage Landing"
            placement="detail"
            preamble-text="Presented by"
            src="{% content_tunic_campaign_url special_coverage.tunic_campaign_id %}"
            name-only
          >
          </campaign-display>
        {% endif %}
        <bulbs-video-meta
          src='{{ VIDEOHUB_BASE_URL }}/video/{{current_video}}.json'
          share-email-message="{{share_message}}"
          share-twitter-handle="{{twitter_handle}}"
          data-track-category="Special Coverage Landing"
          share-track-action="Video: Main: Share"
        >
        </bulbs-video-meta>
      </div>
    </div>
  {% endif %}

  {% if special_coverage.videos.1 %}

    <div class='bulbs-carousel-divider sc-divider'>
      <hr>
    </div>

    <bulbs-carousel class='video-carousel-carousel sc-video-carousel'>
      <div class='video-carousel-header'>
        <span class='video-carousel-header-title'>
          UP NEXT
        </span>
        {% if special_coverage.tunic_campaign_id %}
          <campaign-display
            class="campaign-display-preamble"
            data-track-action="Video: Recirc: Sponsor"
            data-track-category="Special Coverage Landing"
            placement="detail"
            preamble-text="Presented by"
            src="{% content_tunic_campaign_url special_coverage.tunic_campaign_id %}"
            name-only
          >
          </campaign-display>
        {% endif %}
        <bulbs-carousel-previous class="video-carousel-previous"></bulbs-carousel-previous>
        <bulbs-carousel-next class="video-carousel-next"></bulbs-carousel-next>
      </div>

      <bulbs-carousel-slider>
        {% for video_id in special_coverage.videos %}
          <bulbs-carousel-item
            data-track-category="Special Coverage Landing"
            data-track-action="Video: Recirc: {{forloop.counter}}"
            data-track-label='{% url 'special-video' slug=special_coverage.slug video_id=video_id %}'
            href='{% url 'special-video' slug=special_coverage.slug video_id=video_id %}'
            {% if video_id == current_video %}
              now-playing
            {% endif %}
          >
            <bulbs-video-summary
              class="video-carousel-summary"
              src='{{ VIDEOHUB_BASE_URL }}/video/{{video_id}}.json'
              {% if video_id == current_video %}
                now-playing
              {% endif %}
            >
            </bulbs-video-summary>
          </bulbs-carousel-item>
        {% endfor %}
      </bulbs-carousel-slider>
    </div>
  </bulbs-video-carousel>
{% endif %}


<section class="sc-landing-body">
  <div class="sc-landing-rail">
    <h1>{{ special_coverage.name }}</h1>
    {% if special_coverage.tunic_campaign_id %}
      <campaign-display
        class="campaign-display-preamble"
        data-track-action="Video: Recirc: Sponsor"
        data-track-category="Special Coverage Landing"
        placement="detail"
        preamble-text="Presented by"
        src="{% content_tunic_campaign_url special_coverage.tunic_campaign_id %}"
        logo-only
      >
      </campaign-display>
    {% endif %}
    {% if special_coverage.description %}
      <p class="sc-landing-description">{{ special_coverage.description }}</p>
    {% endif %}
    <share-tools
      class="bulbs-share circle"
      data-track-action="Special Coverage Landing: Share"
      share-title="{{ special_coverage.name }} - The A.V. Club"
      share-url="{{ EXTERNAL_URL }}/special/{{ special_coverage.slug }}">
      <share-via-facebook icon></share-via-facebook>
      <share-via-twitter icon twitter-handle="theavclub"></share-via-twitter>
      <share-via-email icon message="via avclub.com"></share-via-email>
    </share-tools>
  </div>
  <ul class="sc-landing-list">
    {% for content in content_list  %}
      <li class="sc-landing-list-item">
        <a
          data-track-category="Special Coverage Landing"
          data-track-action="Article: "
          data-track-label="{{ content.get_absolute_url }}"
          href="{{ content.get_absolute_url }}"
          class="sc-landing-list-item-link"
        >
          <figure>
            {% cropped content.image %}
          </figure>
          <div class="meta">
            <span class="feature-type">{{ content.feature_type }}</span>
            <h2>{{ content.title|safe }}</h2>
            <span class="pub">{{ content.published|naturalday|capfirst }}</span>
          </div>
        </a>
      </li>
    {% endfor %}
  </ul>
</section>


